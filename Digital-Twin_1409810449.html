<!DOCTYPE html>
<html>
    <head>
        <title>CNERG F24 : Digital Twin</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">CNERG F24</a></span>
                            </li>
                                                    <li>
                                <span><a href="CNERG-F24_1356464471.html">CNERG F24</a></span>
                            </li>
                                                    <li>
                                <span><a href="Digital-Twin_1410072611.html">Digital Twin</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            CNERG F24 : Digital Twin
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Justin Dookhran</span>, last modified by <span class='editor'> ASHISH GYAWALI</span> on Dec 12, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="DigitalTwin-Overview">Overview</h2><p>This <strong>Digital Twin</strong> implementation simulates the room number 3G26 environment of Conestoga College Waterloo Campus, where the <strong>right room</strong> represents Sean's small office, and the <strong>left room</strong> represents the big hall office. The system integrates several Unity scripts to manage visitor movements, interactions, and camera controls, creating a virtual mirror of the real-world environment.</p><hr/><h2 id="DigitalTwin-KeyComponentsandFlows">Key Components and Flows</h2><h3 id="DigitalTwin-1.VisitorManagement">1. <strong>Visitor Management</strong></h3><p>The <code>VisitorManager</code> script governs visitor simulation, spawning, and movement between rooms based on predefined data.</p><h4 id="DigitalTwin-CoreFunctionalities"><strong>Core Functionalities</strong></h4><ul><li><p><strong>Initialization:</strong></p><ul><li><p>Visitors are spawned in the left room (<code>SpawnVisitorsInLeftRoom</code>) or right room (<code>SpawnVisitorsInRightRoom</code>) during initialization.</p></li><li><p>Spawn points are randomly selected within defined areas.</p></li></ul></li><li><p><strong>Hourly Simulation:</strong></p><ul><li><p>Data-driven logic simulates hourly visitor flow (<code>SimulateHours</code>).</p></li><li><p>Movement between rooms occurs based on data provided (e.g., <code>inPerHour</code> and <code>outPerHour</code>).</p></li></ul></li><li><p><strong>Visitor Movement:</strong></p><ul><li><p>Visitors move to specific waypoints (doorways, room centers) using the <code>MoveVisitorIn</code> and <code>MoveVisitorOut</code> methods.</p></li><li><p>Interaction with the <code>DoorController</code> ensures door state synchronization with visitor actions.</p></li></ul></li><li><p><strong>Reset and Initialization:</strong></p><ul><li><p>Reset visitors when switching between simulated dates (<code>ResetVisitors</code>).</p></li><li><p>Data integration with external CSVs allows dynamic data injection.</p></li></ul></li></ul><h4 id="DigitalTwin-IntegrationPoints"><strong>Integration Points</strong></h4><ul><li><p><code>RotateRoom</code>: Ensures room state updates during simulation.</p></li><li><p><code>DoorController</code>: Coordinates door opening/closing with visitor movement.</p></li></ul><hr/><h3 id="DigitalTwin-2.VisitorMovementLogic">2. <strong>Visitor Movement Logic</strong></h3><p>The <code>moveInsideNPC</code> script controls individual visitor movements via Unity's NavMesh and character animations.</p><h4 id="DigitalTwin-CoreFunctionalities.1"><strong>Core Functionalities</strong></h4><ul><li><p><strong>Waypoint Navigation:</strong></p><ul><li><p>Visitors move to specified waypoints using the <code>MoveToRoom</code> method.</p></li><li><p>Handles intermediate door waypoints for seamless transitions.</p></li></ul></li><li><p><strong>Coroutine Integration:</strong></p><ul><li><p>Coroutines (<code>MoveThroughDoor</code>) ensure logical movement flow between waypoints.</p></li></ul></li><li><p><strong>Realistic Movement:</strong></p><ul><li><p>Integrates with the <code>ThirdPersonCharacter</code> script for smooth animations.</p></li></ul></li></ul><h4 id="DigitalTwin-IntegrationPoints.1"><strong>Integration Points</strong></h4><ul><li><p><code>VisitorManager</code>: Determines visitor movement triggers and waypoints.</p></li><li><p><code>NavMesh</code>: Provides pathfinding for visitors.</p></li></ul><hr/><h3 id="DigitalTwin-3.DoorInteractions">3. <strong>Door Interactions</strong></h3><p>The <code>TriggerVolume</code> and <code>DoorController</code> scripts manage door state transitions based on visitor presence in defined areas.</p><h4 id="DigitalTwin-CoreFunctionalities(DoorController)"><strong>Core Functionalities (DoorController)</strong></h4><ul><li><p><strong>Opening Doors:</strong></p><ul><li><p>The <code>OpenDoor</code> method uses the <code>Animator</code> component to trigger the door's opening animation.</p></li><li><p>Prevents re-opening if the door is already open.</p></li></ul></li><li><p><strong>Closing Doors:</strong></p><ul><li><p>The <code>CloseDoor</code> method triggers the door's closing animation after ensuring the door is open.</p></li></ul></li><li><p><strong>Coroutine Timing:</strong></p><ul><li><p>Ensures smooth transitions using <code>WaitForSeconds</code> for animation delays.</p></li></ul></li></ul><h4 id="DigitalTwin-CoreFunctionalities(TriggerVolume)"><strong>Core Functionalities (TriggerVolume)</strong></h4><ul><li><p><strong>Trigger Areas:</strong></p><ul><li><p>Tracks visitors entering and exiting trigger zones using <code>HashSet</code> objects.</p></li></ul></li><li><p><strong>Door State Management:</strong></p><ul><li><p>Opens doors when visitors enter the entry area.</p></li><li><p>Closes doors when all visitors exit the area.</p></li></ul></li></ul><h4 id="DigitalTwin-IntegrationPoints.2"><strong>Integration Points</strong></h4><ul><li><p><code>VisitorManager</code>: Provides visitor data and coordinates movement near doors.</p></li><li><p><code>Animator</code>: Handles door animations triggered by <code>DoorController</code>.</p></li></ul><hr/><h3 id="DigitalTwin-4.CameraControl">4. <strong>Camera Control</strong></h3><p>The <code>CameraController</code> and <code>CameraRotation</code> scripts manage camera perspectives and movement in the simulation.</p><h4 id="DigitalTwin-CameraSwitching(CameraController)"><strong>Camera Switching (CameraController)</strong></h4><ul><li><p><strong>Core Functionalities:</strong></p><ul><li><p>Switches between predefined camera angles using number keys (<code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>).</p></li><li><p>Activates/deactivates specific cameras for tailored viewpoints (e.g., MainCamera, TopCamera).</p></li></ul></li><li><p><strong>Integration Points:</strong></p><ul><li><p>Complements the simulation by allowing users to view specific rooms or areas.</p></li></ul></li></ul><h4 id="DigitalTwin-CameraMovement(CameraRotation)"><strong>Camera Movement (CameraRotation)</strong></h4><ul><li><p><strong>Core Functionalities:</strong></p><ul><li><p>Allows camera movement and rotation in <strong>GameMode</strong>.</p></li><li><p>Supports keyboard/mouse and TiltFive inputs, with a toggle (<code>T</code> key) to switch between control schemes.</p></li><li><p>Handles movement at variable speeds (slow, normal, sprint).</p></li></ul></li><li><p><strong>Integration Points:</strong></p><ul><li><p>Enhances user navigation and interaction in the Digital Twin environment.</p></li></ul></li></ul><hr/><h3 id="DigitalTwin-5.AnimationManagement">5. <strong>Animation Management</strong></h3><p>The <code>ThirdPersonCharacter</code> script handles visitor animations to ensure realistic movement.</p><h4 id="DigitalTwin-CoreFunctionalities.2"><strong>Core Functionalities</strong></h4><ul><li><p><strong>Grounded Movement:</strong></p><ul><li><p>Handles grounded actions like walking, running, and turning.</p></li></ul></li><li><p><strong>Airborne Movement:</strong></p><ul><li><p>Manages physics and animations when visitors are airborne.</p></li></ul></li><li><p><strong>Customizable Parameters:</strong></p><ul><li><p>Speed, gravity, and jump power can be adjusted for different character behaviors.</p></li></ul></li></ul><h4 id="DigitalTwin-IntegrationPoints.3"><strong>Integration Points</strong></h4><ul><li><p><code>moveInsideNPC</code>: Synchronizes animations with movement logic.</p></li><li><p>Unity Animator: Provides smooth transitions between animation states.</p></li></ul><hr/><h2 id="DigitalTwin-DataFlow">Data Flow</h2><ol start="1"><li><p><strong>Data Injection:</strong></p><ul><li><p>CSV files or external data sources provide hourly visitor data.</p></li><li><p>The <code>VisitorManager</code> processes this data to simulate real-world scenarios.</p></li></ul></li><li><p><strong>Visitor Simulation:</strong></p><ul><li><p>Visitors are spawned and move based on simulation logic.</p></li><li><p>Integration with <code>moveInsideNPC</code> and <code>TriggerVolume</code> ensures accurate movement and interactions.</p></li></ul></li><li><p><strong>Camera Perspectives:</strong></p><ul><li><p>Users can switch between different cameras for a comprehensive view of the simulation.</p></li><li><p>The <code>CameraRotation</code> script enables dynamic navigation.</p></li></ul></li><li><p><strong>Interaction with Objects:</strong></p><ul><li><p><code>TriggerVolume</code> manages interactions with doors, ensuring realistic entry and exit sequences.</p></li></ul></li></ol><hr/><h2 id="DigitalTwin-UserControls">User Controls</h2><div class="table-wrap"><table data-table-width="760" data-layout="default" data-local-id="3d727240-4c38-4c03-9439-147174cdd512" class="confluenceTable"><tbody><tr><th class="confluenceTh"><p>Action</p></th><th class="confluenceTh"><p>Key/Input</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>Toggle control scheme               </p></td><td class="confluenceTd"><p><code>T</code>                       </p></td><td class="confluenceTd"><p>Switch between keyboard/mouse and TiltFive.       </p></td></tr><tr><td class="confluenceTd"><p>Move camera                         </p></td><td class="confluenceTd"><p><code>W</code>, <code>A</code>, <code>S</code>, <code>D</code>        </p></td><td class="confluenceTd"><p>Move camera (keyboard/mouse control scheme).      </p></td></tr><tr><td class="confluenceTd"><p>Rotate camera                       </p></td><td class="confluenceTd"><p>Mouse movement            </p></td><td class="confluenceTd"><p>Rotate camera (keyboard/mouse control scheme).    </p></td></tr><tr><td class="confluenceTd"><p>Change camera perspective           </p></td><td class="confluenceTd"><p><code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>        </p></td><td class="confluenceTd"><p>Switch between predefined camera angles.          </p></td></tr><tr><td class="confluenceTd"><p>Sprint                              </p></td><td class="confluenceTd"><p><code>Shift</code> (keyboard) / <code>X</code>  </p></td><td class="confluenceTd"><p>Increase movement speed.                          </p></td></tr></tbody></table></div><hr/><h2 id="DigitalTwin-Conclusion">Conclusion</h2><p>This <strong>Digital Twin</strong> implementation replicates the real-world 3G26 environment, offering an immersive simulation of Sean's small office and the big hall office. With seamless integration between visitor management, animations, and camera control, it creates a robust virtual environment. For further enhancements, focus on dynamic data inputs, enhanced interactions, and real-time analytics.</p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 20, 2025 13:54</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
